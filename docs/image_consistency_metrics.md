# Image Consistency Metrics for 3D Object Generation

This document outlines the metrics and approaches for evaluating image consistency when generating multiple views of the same 3D object using Google Gemini API and Venice.ai.

## Consistency Criteria

When generating multiple views of the same 3D object, the following consistency aspects should be evaluated:

1. **Style Consistency**: The artistic style, rendering technique, and overall aesthetic should remain consistent across all views.
2. **Object Identity**: The same object should be recognizable in all views, with consistent features, proportions, and details.
3. **Color Scheme**: Colors should be consistent across different views of the same object.
4. **Lighting**: Light sources and shadows should be consistent with the implied 3D structure.
5. **Background**: Background elements should be consistent or appropriately transformed based on the viewing angle.
6. **Scale**: The object should maintain consistent scale across different views.

## Measurement Approaches

### 1. Structural Similarity Index (SSIM)

SSIM measures the similarity between two images based on luminance, contrast, and structure. While not perfect for multi-view consistency (since views are intentionally different), it can be useful when comparing:

- The same view generated multiple times to assess generation stability
- Adjacent views that should have high similarity
- Images generated by different models (Venice.ai vs. Google Gemini) of the same view

### 2. Feature Vector Similarity

Using pre-trained neural networks to extract feature vectors from images and then comparing their cosine similarity:

- Extract features using models like ResNet, VGG, or CLIP
- Compare feature vectors to assess semantic similarity
- This approach is more robust to viewpoint changes than pixel-based methods

### 3. Object Detection Consistency

Using object detection models to verify that:

- The same object class is detected in all views
- Object attributes (color, size, shape) are consistent
- Bounding box proportions are appropriate for the viewing angle

### 4. Human Evaluation Metrics

For subjective aspects that are difficult to quantify:

- Likert scale ratings for style consistency (1-5)
- A/B testing between Venice.ai and Google Gemini generated views
- Expert evaluation of 3D coherence across views

## Testing Workflow

### Direct Image Generation Testing

1. Generate multiple views of the same object using Google Gemini API
2. Measure consistency across the generated views
3. Compare with baseline consistency metrics from Venice.ai

### Venice.ai to Google Pipeline Testing

1. Generate an initial image using Venice.ai
2. Use this image as input to Google Gemini API to generate additional views
3. Measure consistency between the Venice.ai image and Google-generated views
4. Evaluate if the Google-generated views maintain the style and object identity from the Venice.ai image

## Prompt Engineering for Consistency

Based on artist workflows and research, the following prompt strategies can improve multi-view consistency:

1. **Style Anchoring**: Include specific style descriptors in all prompts (e.g., "low-poly", "photorealistic", "cartoon")
2. **View Specification**: Clearly indicate the desired view (e.g., "front view", "45-degree angle from the right")
3. **Consistency Reinforcement**: Include phrases like "same object as previous view", "consistent style and details"
4. **Detail Preservation**: Mention specific details that should be preserved across views
5. **Reference Inclusion**: When possible, include the first image as a reference for generating subsequent views

## Implementation Notes

- Use the Python Imaging Library (PIL) and OpenCV for basic image processing
- Use scikit-image for SSIM calculations
- Consider using pre-trained models from torchvision or tensorflow-hub for feature extraction
- Implement a standardized testing framework that can be applied to both Venice.ai and Google Gemini outputs
